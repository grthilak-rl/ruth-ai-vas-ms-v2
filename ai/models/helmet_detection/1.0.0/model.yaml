# Helmet Detection Model Contract
# Version: 1.0.0
# Detects safety helmet presence/absence on workers

# Contract schema version (required)
contract_schema_version: "1.0.0"

# Model identity (required)
model_id: "helmet_detection"
version: "1.0.0"
display_name: "Helmet Detection"
description: "Detects presence or absence of safety helmets on workers in construction/industrial environments"
author: "Ruth AI Team"

# Input specification (required)
input:
  type: "frame"
  format: "raw_bgr"
  min_width: 320
  min_height: 240
  max_width: 4096
  max_height: 4096
  channels: 3

# Output specification (required)
output:
  schema_version: "1.0"
  schema:
    violation_detected:
      type: "boolean"
      description: "True if worker without helmet detected"
    violation_type:
      type: "string"
      enum:
        - "no_helmet"
        - "helmet_present"
        - "no_person"
        - null
      description: "Type of detection"
    severity:
      type: "string"
      enum:
        - "critical"
        - "high"
        - "medium"
        - "low"
      description: "Violation severity level"
    confidence:
      type: "number"
      min: 0.0
      max: 1.0
      description: "Detection confidence score"
    detections:
      type: "array"
      description: "Array of detected persons with helmet status"
      items:
        type: "object"
        properties:
          bbox:
            type: "array"
            items: "number"
            description: "Bounding box [x1, y1, x2, y2]"
          label:
            type: "string"
            enum:
              - "person_with_helmet"
              - "person_without_helmet"
            description: "Detection class"
          confidence:
            type: "number"
            description: "Detection confidence"
          helmet_bbox:
            type: "array"
            items: "number"
            description: "Helmet bounding box [x1, y1, x2, y2] if detected"
    detection_count:
      type: "integer"
      description: "Number of persons detected"
    metadata:
      type: "object"
      description: "Additional metadata"

# Hardware compatibility (required)
hardware:
  supports_cpu: true
  supports_gpu: true
  supports_jetson: true
  min_ram_mb: 1024
  min_gpu_memory_mb: 256

# Performance hints (required)
performance:
  inference_time_hint_ms: 100
  recommended_fps: 10
  max_fps: 30
  recommended_batch_size: 1
  warmup_iterations: 2

# Resource limits (optional but recommended)
limits:
  max_memory_mb: 2048
  inference_timeout_ms: 3000
  preprocessing_timeout_ms: 500
  postprocessing_timeout_ms: 500
  max_concurrent_inferences: 4

# Model capabilities (optional)
capabilities:
  supports_batching: false
  supports_async: false
  provides_tracking: false
  confidence_calibrated: false
  provides_bounding_boxes: true
  provides_keypoints: false

# Entry points (optional, defaults shown)
entry_points:
  inference: "inference.py"
  preprocess: "preprocess.py"
